{% extends "layout.html" %}

{% block maincontent %} 
    <div>
      <h1>Сайт: {{ site.name }}</h1>
      <table>
        <tr>
          <td>ID</td>
          <td>{{ site.id }}</td>
        </tr>
        <tr>
          <td>Имя</td>
          <td>{{ site.name}}</td>
        </tr>
        <tr>
          <td>Дата создания</td>
          <td>{{ site.created_at }}</td>
        </tr>
      </table>      
      <h1>
        <p>
        Проверки
      </h1>
      <form action="{{ url_for('run_check', url_id=site.id) }}" method="post">
        <input type="submit" value="Запустить проверку"></input>
      </form>
      <table data-test="checks">
        <thead>
          <h2>
            <tr>
              <th>ID</th>
              <th>Код ответа</th>
              <th>h1</th>
              <th>title</th>
              <th>description</th>
              <th>Дата создания</th>
            </tr>
          </h2>
        </thead>
        <tbody>
          {% for check in checks %}
          <tr>
            <td>{{ check.id }}</td>
            <td>{{ check.status_code }}</td>
            <td>{{ check.h1 if check.h1 else '' }}</td>
            <td>{{ check.title if check.title else '' }}</td>
            <td>{{ check.description if check.description else '' }}</td>
            <td>{{ check.created_at if check.created_at else '' }}</td>
          </tr>
          {% endfor %}
        </tbody>
      </table>
    </div>
{% endblock %}